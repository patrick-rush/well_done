<h1><%= @task.title %></h1>
<p>This task was created by <%= @task.user.full_name %>.</p>

<h3>Details</h3>
<ul>
    <li>Due <%= @task.readable_due_date %></li>
</ul>

<% if @task.completed %>
    <%= button_to "Mark as Incomplete", task_path(@task), method: :patch, params: { :"task[completed]" => false } %>
<% else %>
    <%= button_to "Mark as Completed", task_path(@task), method: :patch, params: { :"task[completed]" => true } %>
<% end %>
<%= button_to "Edit Task", edit_task_path(@task) %>
<%= button_to "Delete Task", task_path(@task), method: :delete %>

<h3>Comments</h3>

<% @task.comments.each do |comment| %>
    Comment from <%= comment.user.full_name %>: <br>
    <%= comment.content %> <br><br>
<% end %>

<%= form_for @comment do |f| %>
    <%= f.hidden_field :commentable_type, value: "Task" %>
    <%= f.hidden_field :commentable_id, value: @task.id %>
    <%= f.hidden_field :user_id, value: current_user.id %>
    <%= f.label :content, "New Comment" %>
    <%= f.text_area :content %>
    <%= f.submit %>
<% end %>